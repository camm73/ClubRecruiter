From e2689fe125e7db6bea8cad3e7f30145aa10aec2a Mon Sep 17 00:00:00 2001
From: Cameron Miller <camm73@yahoo.com>
Date: Fri, 26 Nov 2021 21:29:39 -0800
Subject: [PATCH] Send html instead of plaintext

---
 .../src/components/EmailForm.jsx              | 22 +++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/frontend/club-recruiter-ui/src/components/EmailForm.jsx b/frontend/club-recruiter-ui/src/components/EmailForm.jsx
index daa20d4..7769fd2 100644
--- a/frontend/club-recruiter-ui/src/components/EmailForm.jsx
+++ b/frontend/club-recruiter-ui/src/components/EmailForm.jsx
@@ -1,3 +1,4 @@
+/* eslint-disable no-restricted-syntax */
 import { Container, Button, CircularProgress } from '@mui/material';
 import React, { useState } from 'react';
 import { useForm } from 'react-hook-form';
@@ -12,10 +13,27 @@ const EmailForm = ({ filteredEmailList }) => {
   const { eventID } = useParams();
   const history = useHistory();
 
+  const processBody = (body) => {
+    const sentenceArr = body.split('\n');
+    const htmlStr = [];
+
+    for (const sentence of sentenceArr) {
+      const sanitizedSentence = sentence.replace('<', '').replace('>', '');
+      if (sanitizedSentence.length > 0) {
+        console.log(`<p style="font-family: sans-serif; font-size: 14px; font-weight: normal; margin: 0; margin-bottom: 15px;">${sanitizedSentence}</p>`);
+        htmlStr.push(`<p style="font-family: sans-serif; font-size: 14px; font-weight: normal; margin: 0; margin-bottom: 15px;">${sanitizedSentence}</p>`);
+      } else {
+        htmlStr.push('<br>');
+      }
+    }
+
+    return htmlStr;
+  };
+
   const onSubmit = async (data) => {
     setEmailSent(true);
-    console.log(data);
-    const emailStatus = await sendEmail(data.title, data.content, eventID, filteredEmailList);
+    const htmlBody = processBody(data.content);
+    const emailStatus = await sendEmail(data.title, htmlBody, eventID, filteredEmailList);
     setEmailSent(false);
     if (emailStatus) {
       alert('Successfully sent email!');
-- 
2.33.0

